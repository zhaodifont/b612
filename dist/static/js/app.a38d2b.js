webpackJsonp([1],{4586:function(t,e,n){t.exports=n.p+"static/img/pageBg.3c3fc3.jpg"},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("QzcR"),n("klGT"),n("Avvh"),n("0/sL");var o=void 0,r="createTouch"in document?"touchend":"click";function a(){document.querySelector(".loading").classList.add("run"),document.querySelector(".loading").style.display="flex",o=setInterval(function(){window.navigator.onLine||(i(),c("请检查网络连接"),clearInterval(o))},20)}function i(){document.querySelector(".loading,.mask").style.display="none",document.querySelector(".loading").classList.remove("run"),clearInterval(o)}function c(t){$(".errMsg var").text(t),$(".errMsg").css("display","flex"),$(".errMsg .wpr,.errMsg").bind(r,function(t){t.stopPropagation()}),$(".errMsg").bind(r,function(){s()}),$(".errMsg .close").bind(r,function(){s()})}function s(){$(".errMsg,.mask").css("display","none"),$(".errMsg .wpr,.errMsg").unbind(r),$(".errMsg").unbind(r),$(".errMsg button").unbind(r)}var f=n("Zrlr"),l=n.n(f),u=n("wxAW"),d=n.n(u),h=function(){var t,e,n=(t=document.createElement("canvas"),{canvas:!!(e=t.getContext("2d")),imageData:!!e.getImageData,dataURL:!!t.toDataURL,btoa:!!window.btoa});function o(t,e,n){var o=t.width,r=t.height;void 0==e&&(e=o),void 0==n&&(n=r);var a=document.createElement("canvas"),i=a.getContext("2d");return a.width=e,a.height=n,i.fillStyle="#00000",i.shadowBlur=20,i.shadowColor="black",i.fillRect(0,0,e,n),i.drawImage(t,0,0,o,r,0,0,e,n),a}function r(t,e,n,r){return(t=o(t,n,r)).toDataURL(e)}function a(t){document.location.href=t}function i(t){var e=document.createElement("img");return e.src=t,e}function c(t){return"image/"+(t=t.toLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]}function s(t){if(!window.btoa)throw"btoa undefined";var e="";if("string"==typeof t)e=t;else for(var n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function f(t){var e=t.width,n=t.height;return t.getContext("2d").getImageData(0,0,e,n)}function l(t,e){return"data:"+e+";base64,"+t}var u=function(t){var e=t.width,n=t.height,o=e*n*3,r=o+54,a=[66,77,255&r,r>>8&255,r>>16&255,r>>24&255,0,0,0,0,54,0,0,0],i=[40,0,0,0,255&e,e>>8&255,e>>16&255,e>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,1,0,24,0,0,0,0,0,255&o,o>>8&255,o>>16&255,o>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=(4-3*e%4)%4,f=t.data,l="",u=e<<2,d=n,h=String.fromCharCode;do{for(var g=u*(d-1),p="",m=0;m<e;m++){var v=m<<2;p+=h(f[g+v+2])+h(f[g+v+1])+h(f[g+v])}for(var y=0;y<c;y++)p+=String.fromCharCode(0);l+=p}while(--d);return s(a.concat(i))+s(l)},d=function(t,e,i,s){if(n.canvas&&n.dataURL)if("string"==typeof t&&(t=document.getElementById(t)),void 0==s&&(s="png"),s=c(s),/bmp/.test(s)){var d=f(o(t,e,i));a(l(u(d),"image/octet-stream"))}else{a(r(t,s,e,i).replace(s,"image/octet-stream"))}},h=function(t,e,a,s){if(n.canvas&&n.dataURL){if("string"==typeof t&&(t=document.getElementById(t)),void 0==s&&(s="png"),s=c(s),/bmp/.test(s)){var d=f(o(t,e,a));return i(l(u(d),"image/bmp"))}return i(r(t,s,e,a))}};return{saveAsImage:d,saveAsPNG:function(t,e,n){return d(t,e,n,"png")},saveAsJPEG:function(t,e,n){return d(t,e,n,"jpeg")},saveAsGIF:function(t,e,n){return d(t,e,n,"gif")},saveAsBMP:function(t,e,n){return d(t,e,n,"bmp")},convertToImage:h,convertToPNG:function(t,e,n){return h(t,e,n,"png")},convertToJPEG:function(t,e,n){return h(t,e,n,"jpeg")},convertToGIF:function(t,e,n){return h(t,e,n,"gif")},convertToBMP:function(t,e,n){return h(t,e,n,"bmp")}}}(),g=function(){function t(){l()(this,t)}return d()(t,null,[{key:"canvasInit",value:function(){t.recordPoint.length=0;var e=t.canvas,n=e.getContext("2d"),o=$(".page2blank"),r={color:"#fadaf0",lineWidth:.4*$(".heart1")[0].offsetWidth,parentTop:$("#page2 .parent")[0].offsetTop,parentLeft:$("#page2 .parent").offset().left+$(".page2blank").offset().left},a=[p($(".heart1")),p($(".heart2")),p($(".heart3")),p($(".heart4")),p($(".heart5"))];e.setAttribute("width",o.offset().width),e.setAttribute("height",o.offset().height),e.style.left=o.offset().left+"px",n.strokeStyle=r.color,n.globalAlpha=.5;var i=void 0,c=void 0,s=void 0,f=void 0,l=void 0,u=void 0,d=void 0,h=!1;$(".hearts").on("touchstart",function(o){var r;(u=function(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}(o,"down"))&&("touch"!=(r=o).pointerType&&r.pointerType!=r.MSPOINTER_TYPE_TOUCH||!r.isPrimary)||(l=u?o:o.touches[0],"touchstart"===o.type&&(i=l.clientX,c=l.clientY,h=a.some(function(o,r){var s=i>a[r].l&&i<a[r].r,f=c+$("#app").scrollTop()>a[r].t&&c+$("#app").scrollTop()<a[r].b;return s&&f&&(t.recordPoint=[],n.clearRect(0,0,e.offsetWidth,e.offsetHeight),d=r,i=a[r].l+a[r].w/2,c=a[r].t+a[r].h/2,0==r&&(i=a[r].l+a[r].w/2+8),t.recordPoint.push({x:i,y:c,i:r}),$(".hearts img").eq(r).removeClass("run"),setTimeout(function(){$(".hearts img").eq(r).addClass("run")},10)),s&&f})))}),$(".hearts").on("touchmove",function(o){if(h&&(o.preventDefault(),"touchmove"===o.type)){n.clearRect(0,0,e.offsetWidth,e.offsetHeight),s=o.touches[0].clientX,f=o.touches[0].clientY;var i=s,c=f,l=!1;a.forEach(function(e,n){var o=s>a[n].l&&s<a[n].r,r=f+$("#app").scrollTop()>a[n].t&&f+$("#app").scrollTop()<a[n].b;o&&r&&(i=a[n].l+a[n].w/2,c=a[n].t+a[n].h/2,0==n&&(s=a[n].l+a[n].w/2+8),n!=d&&(t.recordPoint.push({x:i,y:c,i:n}),d=n),l=!0,$(".hearts img").removeClass("run"),$(".hearts img").eq(n).addClass("run"))}),t.recordPoint.length&&t.recordPoint.forEach(function(t,e){n.fillStyle=r.color,n.beginPath(),n.arc(t.x-r.parentLeft,t.y-r.parentTop,r.lineWidth/2,0,2*Math.PI,!0),n.closePath(),n.fill()}),n.lineWidth=r.lineWidth,n.fillStyle=r.color,t.recordPoint.length&&t.recordPoint.reduce(function(t,e){return n.beginPath(),n.moveTo(t.x-r.parentLeft,t.y-r.parentTop),n.lineTo(e.x-r.parentLeft,e.y-r.parentTop),n.stroke(),n.closePath(),e}),l||(n.beginPath(),n.moveTo(t.recordPoint[t.recordPoint.length-1].x-r.parentLeft,t.recordPoint[t.recordPoint.length-1].y-r.parentTop),n.lineTo(i-r.parentLeft,c-r.parentTop+$("#app").scrollTop()),n.stroke(),n.closePath())}}),$(".hearts").on("touchend",function(){n.clearRect(0,0,e.offsetWidth,e.offsetHeight),t.recordPoint.length&&t.recordPoint.forEach(function(t,e){n.fillStyle=r.color,n.beginPath(),n.arc(t.x-r.parentLeft,t.y-r.parentTop,r.lineWidth/2,0,2*Math.PI,!0),n.closePath(),n.fill()}),t.recordPoint.length&&t.recordPoint.reduce(function(t,e){return n.beginPath(),n.moveTo(t.x-r.parentLeft,t.y-r.parentTop),n.lineTo(e.x-r.parentLeft,e.y-r.parentTop),n.stroke(),n.closePath(),e})})}},{key:"getPoint",value:function(){return t.recordPoint.length}},{key:"redo",value:function(){t.recordPoint=[],t.canvas.getContext("2d").clearRect(0,0,canvas.offsetWidth,canvas.offsetHeight)}}]),t}();function p(t){return{l:t.offset().left,t:t.offset().top-Math.abs($("#app").scrollTop()),r:t.offset().left+t.offset().width,b:t.offset().top+t.offset().height-Math.abs($("#app").scrollTop()),w:t.offset().width,h:t.offset().height}}function m(t,e){var n=document.createElement("script");n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,e&&e())}:n.onload=function(){e&&e()},n.src=t,document.getElementsByTagName("head")[0].appendChild(n)}g.recordPoint=[],g.canvas=$("#canvas")[0];var v,y=function(){function t(){l()(this,t)}return d()(t,null,[{key:"isIos",value:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)}},{key:"isAnd",value:function(){return!!navigator.userAgent.match(/Android/i)}},{key:"lowSysVersion",value:function(){if(t.isIos()){var e=[10,2,2],n=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);n.shift();for(var o=0;o<e.length;o++){var r=parseInt(n[o],10)||0,a=parseInt(e[o],10)||0;if(r<a)return!0;if(r>a)return!1}return!1}if(t.isAnd()){var i=[4,5,0],c=navigator.userAgent.match(/Android (\d+)\.(\d+)\.?(\d+)?/);c.shift();for(var s=0;s<i.length;s++){var f=parseInt(c[s],10)||0,l=parseInt(i[s],10)||0;if(f<l)return!0;if(f>l)return!1}return!1}}}]),t}(),T=n("4586"),b=n.n(T),P={userName:"路人甲",titles:["单身时长不足，请不要再充值了","请珍惜自己寥寥无几的单身生活","相遇之前，即使单枪匹马也能勇敢无畏","万年单身狗说的就是本人"],des:[["有风险，但也有机会。","你需要主动。","不妨赌一把。","天上要​​掉馅饼了。","别让它影响到你。","照你想做的那样去做。","说出来吧。","不要犹豫。","机会稍纵即逝。"],["找个人给你点意见。","观望。","照你想做的那样去做。","借助他人经验。","安排！","去争取机会。","改变不了世界，改变自己。","主动一点，人生会大不相同。","掌握更多信息。","相信你最初的想法。","观察形势。","你可能不得不放弃其他东西。","不要忧虑。","保持头脑清醒。","你必须现在就行动。","需要花费点时间。","不要迫于压力而改变初衷。","不要忽略身边的人。","去改变。","取决于你的选择。"],["勿忘初心，方得始终。","克服困难。","注意身后。","你需要考虑其他方面。","等待。","相信你的直觉。","去问你爸爸。","去尝试。","不妥协。","要有耐心。","有时应该回头看看。"],["醒醒吧，别做梦了。","不如试试换下性取向。","看看自己的小肚腩。","看看自己的小粗腿。","平时少吃点。","多读书多看报，少吃零食多睡觉。","放弃吧，别做梦了。","赶紧制定健身计划。","脱单是不可能脱单的，这辈子都不可能的。","脱单？是零食不好吃还是游戏不好玩。","从今往后一万年，始终一个人。","孤独终老。","恋爱绝缘体，是你。","丘比特射箭的时候唯独你掏出盾牌。","别恋爱了，免得被绿。","同性才是真爱，异性恋什么的好奇怪。","恋爱程序已被杀死，请重启自己。​"]]};(v=new Image).onload=function(){i(),document.querySelector("#app").style.opacity="1",document.querySelector("#page1 .text").classList.add("run")},v.src=b.a,$("#startBtn").on("click",function(){var t=$('input[name="userName"]').val().trim();return 0===t.length?(c("请输入用户名"),!1):t.length>5?(c("请不要超过5个字哦"),!1):(P.userName=t,void I())});var w=null;function I(){S(),$("#page1,#page3").hide(),$("#page2").show(),setTimeout(function(){g.canvasInit()},20),$(".redo").bind("click",function(){g.redo()}),$(".confirm").bind("click",function(){g.getPoint()?(a(),clearInterval(w),function(t){var e=Math.floor(100*Math.random()),n=$(".page3").eq(0);n.find(".name").html(P.userName),n.find(".tip").find("img").eq(1).show();var o=e+1,r=0,a=30,i=0;o>=1&&o<10?(r=0,a=10+Math.floor(20*Math.random())):o>=10&&o<50?(r=1,a=30+Math.floor(150*Math.random())):o>=50&&o<70?(r=2,a=150+Math.floor(210*Math.random())):o>=70&&o<100&&(r=3,a=0);n.find(".tip var").html(P.titles[r]);var c=P.des[r].length;n.find(".des var").html(P.des[r][Math.floor(Math.random()*c)]),a?(i=3600*(4+Math.floor(20*Math.random())),w=setInterval(function(){if(0!=i){var t=Math.floor(i/3600),e=Math.floor((i-60*t*60)/60),o=i-3600*t-60*e;i--,n.find(".time em").html(a),n.find(".time var").eq(0).html(t),n.find(".time var").eq(1).html(e),n.find(".time var").eq(2).html(o)}else clearInterval(w)},1e3)):(n.find(".tip").find("img").eq(0).show(),n.find(".tip").find("img").eq(1).hide(),n.find(".time").html("10000年哈"));t&&t();setTimeout(function(){console.log("probability",e),console.log("date",(new Date).getTime())},1e3)}(function(){setTimeout(function(){var t;S(),i(),$("#page1, #page2").hide(),$("#page3").show(),$(".retest").on("click",function(){w&&clearInterval(w),I()}),$("#page3").on("touchstart",function(e){t=setTimeout(function(){e.preventDefault(),function t(){a(),document.querySelector("#page4").innerHTML="",$("#page4").append($("#page3").clone()),setTimeout(function(){!function(t,e){var n=t,o=n.offsetWidth,r=n.offsetHeight,a=document.createElement("canvas");a.width=1.5*o,a.height=1.5*r,a.getContext("2d").scale(1.5,1.5);var i={scale:1.5,canvas:a,width:o,height:r,useCORS:!0,onrendered:function(t){var n=t.getContext("2d");n.mozImageSmoothingEnabled=!1,n.webkitImageSmoothingEnabled=!1,n.msImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,setTimeout(function(){var n=h.convertToJPEG(t,t.width,t.height);e&&e(n)},0)}};setTimeout(function(){html2canvas(n,i)})}($("#page4 #page3")[0],function(e){var n=new Image;$(".log").html(e.src.length),e.src.length<4e4?t():(n.onload=function(){M.find("#shareImg")[0].src=this.src,i(),M.find(".shareDist").css({display:"flex"}),M.find("#shareImg").css({width:"80%"}),M.find("#shareImg").on("touchstart",function(t){t.stopPropagation()}),M.find(".shareDist").on("touchstart",function(t){t.stopPropagation(),M.find(".shareDist").css({display:"none"}),M.find("#shareImg").off("touchstart"),M.find(".shareDist").off("touchstart"),$("#page4").empty()})},n.src=e.src)})},100)}()},300)}).on("touchmove",function(){clearTimeout(t)}).on("touchend",function(){clearTimeout(t)})},1e3)})):c("请连接至少一点")}),setTimeout(function(){y.lowSysVersion()&&y.isAnd()?m("https://cdn.bootcss.com/html2canvas/0.4.1/html2canvas.min.js"):m("https://cdn.bootcss.com/html2canvas/0.5.0-beta4/html2canvas.min.js"),m("https://cdn.bootcss.com/html2canvas/0.4.1/html2canvas.min.js")})}var M=$(".page3").eq(0);function S(){$(".redo, .confirm, #startBtn, .retest").off("click")}},QzcR:function(t,e){},klGT:function(t,e){}},["NHnr"]);