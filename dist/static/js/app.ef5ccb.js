webpackJsonp([1],{4586:function(t,e,n){t.exports=n.p+"static/img/pageBg.3c3fc3.jpg"},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("QzcR"),n("klGT"),n("Avvh"),n("0/sL");var o=void 0,i="createTouch"in document?"touchend":"click";function r(){document.querySelector(".loading").classList.add("run"),document.querySelector(".loading").style.display="flex",o=setInterval(function(){window.navigator.onLine||(a(),c("请检查网络连接"),clearInterval(o))},20)}function a(){document.querySelector(".loading,.mask").style.display="none",document.querySelector(".loading").classList.remove("run"),clearInterval(o)}function c(t){$(".errMsg var").text(t),$(".errMsg").css("display","flex"),$(".errMsg .wpr,.errMsg").bind(i,function(t){t.stopPropagation()}),$(".errMsg").bind(i,function(){s()}),$(".errMsg .close").bind(i,function(){s()})}function s(){$(".errMsg,.mask").css("display","none"),$(".errMsg .wpr,.errMsg").unbind(i),$(".errMsg").unbind(i),$(".errMsg button").unbind(i)}var l=n("Zrlr"),u=n.n(l),d=n("wxAW"),f=n.n(d),h=function(){function t(e){u()(this,t),this.src=e.src,this.controlIcon=e.icon,this.isPlaying=e.isPlaying||!0,this._touch="createTouch"in document?"touchstart":"click",this.init()}return f()(t,[{key:"init",value:function(){var t=this,e=document.createElement("audio");e.src=this.src,e.setAttribute("controls","controls"),e.setAttribute("loop","true"),e.setAttribute("id","audio"),document.body.appendChild(e),this.audio=e,this._play(),$("body").on(this._touch,this.musicHandler.bind(this)),this.controlIcon.addEventListener(this._touch,function(e){t.isPlaying?t._pause():t._play(),e.stopPropagation()},!1),this.visibility()}},{key:"_play",value:function(){this.isPlaying=!0,this.controlIcon.classList.remove("pause"),this.controlIcon.classList.add("play"),this.audio.play()}},{key:"_pause",value:function(){this.isPlaying=!1,this.controlIcon.classList.remove("play"),this.controlIcon.classList.add("pause"),this.audio.pause()}},{key:"musicHandler",value:function(t){$("body").off(this._touch),0!=this.audio.paused&&(this._play(),t.stopPropagation())}},{key:"visibility",value:function(){var t=this;document.visibilityState&&document.addEventListener("visibilitychange",function(){setTimeout(function(){"hidden"==document.visibilityState?this.audio.pause():"visible"==document.visibilityState&&t._play()},120)},!1)}}]),t}(),p=function(){var t,e,n=(t=document.createElement("canvas"),{canvas:!!(e=t.getContext("2d")),imageData:!!e.getImageData,dataURL:!!t.toDataURL,btoa:!!window.btoa});function o(t,e,n){var o=t.width,i=t.height;void 0==e&&(e=o),void 0==n&&(n=i);var r=document.createElement("canvas"),a=r.getContext("2d");return r.width=e,r.height=n,a.fillStyle="#00000",a.shadowBlur=20,a.shadowColor="black",a.fillRect(0,0,e,n),a.drawImage(t,0,0,o,i,0,0,e,n),r}function i(t,e,n,i){return(t=o(t,n,i)).toDataURL(e)}function r(t){document.location.href=t}function a(t){var e=document.createElement("img");return e.src=t,e}function c(t){return"image/"+(t=t.toLowerCase().replace(/jpg/i,"jpeg")).match(/png|jpeg|bmp|gif/)[0]}function s(t){if(!window.btoa)throw"btoa undefined";var e="";if("string"==typeof t)e=t;else for(var n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function l(t){var e=t.width,n=t.height;return t.getContext("2d").getImageData(0,0,e,n)}function u(t,e){return"data:"+e+";base64,"+t}var d=function(t){var e=t.width,n=t.height,o=e*n*3,i=o+54,r=[66,77,255&i,i>>8&255,i>>16&255,i>>24&255,0,0,0,0,54,0,0,0],a=[40,0,0,0,255&e,e>>8&255,e>>16&255,e>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,1,0,24,0,0,0,0,0,255&o,o>>8&255,o>>16&255,o>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=(4-3*e%4)%4,l=t.data,u="",d=e<<2,f=n,h=String.fromCharCode;do{for(var p=d*(f-1),g="",m=0;m<e;m++){var v=m<<2;g+=h(l[p+v+2])+h(l[p+v+1])+h(l[p+v])}for(var y=0;y<c;y++)g+=String.fromCharCode(0);u+=g}while(--f);return s(r.concat(a))+s(u)},f=function(t,e,a,s){if(n.canvas&&n.dataURL)if("string"==typeof t&&(t=document.getElementById(t)),void 0==s&&(s="png"),s=c(s),/bmp/.test(s)){var f=l(o(t,e,a));r(u(d(f),"image/octet-stream"))}else{r(i(t,s,e,a).replace(s,"image/octet-stream"))}},h=function(t,e,r,s){if(n.canvas&&n.dataURL){if("string"==typeof t&&(t=document.getElementById(t)),void 0==s&&(s="png"),s=c(s),/bmp/.test(s)){var f=l(o(t,e,r));return a(u(d(f),"image/bmp"))}return a(i(t,s,e,r))}};return{saveAsImage:f,saveAsPNG:function(t,e,n){return f(t,e,n,"png")},saveAsJPEG:function(t,e,n){return f(t,e,n,"jpeg")},saveAsGIF:function(t,e,n){return f(t,e,n,"gif")},saveAsBMP:function(t,e,n){return f(t,e,n,"bmp")},convertToImage:h,convertToPNG:function(t,e,n){return h(t,e,n,"png")},convertToJPEG:function(t,e,n){return h(t,e,n,"jpeg")},convertToGIF:function(t,e,n){return h(t,e,n,"gif")},convertToBMP:function(t,e,n){return h(t,e,n,"bmp")}}}(),g=function(){function t(){u()(this,t)}return f()(t,null,[{key:"isIos",value:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)}},{key:"isAnd",value:function(){return!!navigator.userAgent.match(/Android/i)}},{key:"lowSysVersion",value:function(){if(t.isIos()){var e=[10,2,2],n=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);n.shift();for(var o=0;o<e.length;o++){var i=parseInt(n[o],10)||0,r=parseInt(e[o],10)||0;if(i<r)return!0;if(i>r)return!1}return!1}if(t.isAnd()){var a=[4,5,0],c=navigator.userAgent.match(/Android (\d+)\.(\d+)\.?(\d+)?/);c.shift();for(var s=0;s<a.length;s++){var l=parseInt(c[s],10)||0,u=parseInt(a[s],10)||0;if(l<u)return!0;if(l>u)return!1}return!1}}}]),t}(),m=function(){function t(){u()(this,t)}return f()(t,null,[{key:"canvasInit",value:function(){t.recordPoint.length=0;var e=t.canvas,n=e.getContext("2d"),o=$(".page2blank"),i={color:"#fadaf0",lineWidth:.4*$(".heart1")[0].offsetWidth,parentTop:$("#page2 .parent")[0].offsetTop,parentLeft:$("#page2 .parent").offset().left+$(".page2blank").offset().left},r=[v($(".heart1")),v($(".heart2")),v($(".heart3")),v($(".heart4")),v($(".heart5"))];e.setAttribute("width",o.offset().width),e.setAttribute("height",o.offset().height),e.style.left=o.offset().left+"px",n.strokeStyle=i.color,n.globalAlpha=.5;var a=void 0,c=void 0,s=void 0,l=void 0,u=void 0,d=void 0,f=void 0,h=!1;$(".hearts").on("touchstart",function(o){var i;(d=function(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}(o,"down"))&&("touch"!=(i=o).pointerType&&i.pointerType!=i.MSPOINTER_TYPE_TOUCH||!i.isPrimary)||(u=d?o:o.touches[0],"touchstart"===o.type&&(a=u.clientX,c=u.clientY,h=r.some(function(o,i){var s=a>r[i].l&&a<r[i].r,l=c+$("#app").scrollTop()>r[i].t&&c+$("#app").scrollTop()<r[i].b;return s&&l&&(t.recordPoint=[],n.clearRect(0,0,e.offsetWidth,e.offsetHeight),f=i,a=r[i].l+r[i].w/2,c=r[i].t+r[i].h/2,0==i&&(a=r[i].l+r[i].w/2+8),t.recordPoint.push({x:a,y:c,i:i}),$(".hearts img").eq(i).removeClass("run"),setTimeout(function(){$(".hearts img").eq(i).addClass("run")},10)),s&&l})))}),$(".hearts").on("touchmove",function(o){if(h&&(o.preventDefault(),"touchmove"===o.type)){n.clearRect(0,0,e.offsetWidth,e.offsetHeight),s=o.touches[0].clientX,l=o.touches[0].clientY;var a=s,c=l,u=!1;r.forEach(function(e,n){var o=s>r[n].l&&s<r[n].r,i=l+$("#app").scrollTop()>r[n].t&&l+$("#app").scrollTop()<r[n].b;o&&i&&(a=r[n].l+r[n].w/2,c=r[n].t+r[n].h/2,0==n&&(s=r[n].l+r[n].w/2+8),n!=f&&(t.recordPoint.push({x:a,y:c,i:n}),f=n),u=!0,$(".hearts img").removeClass("run"),$(".hearts img").eq(n).addClass("run"))}),t.recordPoint.length&&t.recordPoint.forEach(function(t,e){n.fillStyle=i.color,n.beginPath(),n.arc(t.x-i.parentLeft,t.y-i.parentTop,i.lineWidth/2,0,2*Math.PI,!0),n.closePath(),n.fill()}),n.lineWidth=i.lineWidth,n.fillStyle=i.color,t.recordPoint.length&&t.recordPoint.reduce(function(t,e){return n.beginPath(),n.moveTo(t.x-i.parentLeft,t.y-i.parentTop),n.lineTo(e.x-i.parentLeft,e.y-i.parentTop),n.stroke(),n.closePath(),e}),u||(n.beginPath(),n.moveTo(t.recordPoint[t.recordPoint.length-1].x-i.parentLeft,t.recordPoint[t.recordPoint.length-1].y-i.parentTop),n.lineTo(a-i.parentLeft,c-i.parentTop+$("#app").scrollTop()),n.stroke(),n.closePath())}}),$(".hearts").on("touchend",function(){n.clearRect(0,0,e.offsetWidth,e.offsetHeight),t.recordPoint.length&&t.recordPoint.forEach(function(t,e){n.fillStyle=i.color,n.beginPath(),n.arc(t.x-i.parentLeft,t.y-i.parentTop,i.lineWidth/2,0,2*Math.PI,!0),n.closePath(),n.fill()}),t.recordPoint.length&&t.recordPoint.reduce(function(t,e){return n.beginPath(),n.moveTo(t.x-i.parentLeft,t.y-i.parentTop),n.lineTo(e.x-i.parentLeft,e.y-i.parentTop),n.stroke(),n.closePath(),e})})}},{key:"getPoint",value:function(){return t.recordPoint.length}},{key:"redo",value:function(){t.recordPoint=[],t.canvas.getContext("2d").clearRect(0,0,canvas.offsetWidth,canvas.offsetHeight)}}]),t}();function v(t){return{l:t.offset().left,t:t.offset().top-Math.abs($("#app").scrollTop()),r:t.offset().left+t.offset().width,b:t.offset().top+t.offset().height-Math.abs($("#app").scrollTop()),w:t.offset().width,h:t.offset().height}}function y(t,e){var n=document.createElement("script");n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,e&&e())}:n.onload=function(){e&&e()},n.src=t,document.getElementsByTagName("head")[0].appendChild(n)}m.recordPoint=[],m.canvas=$("#canvas")[0];var b,P=n("4586"),T=n.n(P),w=n("aO3C"),I=(new h({src:n.n(w).a,icon:document.querySelector(".musIcon")}),{userName:"路人甲",titles:["单身时长不足，请不要再充值了","请珍惜自己寥寥无几的单身生活","相遇之前，即使单枪匹马也能勇敢无畏","万年单身狗说的就是本人"],des:[["有风险，但也有机会。","你需要主动。","不妨赌一把。","天上要​​掉馅饼了。","别让它影响到你。","照你想做的那样去做。","说出来吧。","不要犹豫。","机会稍纵即逝。"],["找个人给你点意见。","观望。","照你想做的那样去做。","借助他人经验。","安排！","去争取机会。","改变不了世界，改变自己。","主动一点，人生会大不相同。","掌握更多信息。","相信你最初的想法。","观察形势。","你可能不得不放弃其他东西。","不要忧虑。","保持头脑清醒。","你必须现在就行动。","需要花费点时间。","不要迫于压力而改变初衷。","不要忽略身边的人。","去改变。","取决于你的选择。"],["勿忘初心，方得始终。","克服困难。","注意身后。","你需要考虑其他方面。","等待。","相信你的直觉。","去问你爸爸。","去尝试。","不妥协。","要有耐心。","有时应该回头看看。"],["醒醒吧，别做梦了。","不如试试换下性取向。","看看自己的小肚腩。","看看自己的小粗腿。","平时少吃点。","多读书多看报，少吃零食多睡觉。","放弃吧，别做梦了。","赶紧制定健身计划。","脱单是不可能脱单的，这辈子都不可能的。","脱单？是零食不好吃还是游戏不好玩。","从今往后一万年，始终一个人。","孤独终老。","恋爱绝缘体，是你。","丘比特射箭的时候唯独你掏出盾牌。","别恋爱了，免得被绿。","同性才是真爱，异性恋什么的好奇怪。","恋爱程序已被杀死，请重启自己。​"]]});(b=new Image).onload=function(){a(),document.querySelector("#app").style.opacity="1",document.querySelector("#page1 .text").classList.add("run")},b.src=T.a,$("#startBtn").on("click",function(){var t=$('input[name="userName"]').val().trim();return 0===t.length?(c("请输入用户名"),!1):t.length>5?(c("请不要超过5个字哦"),!1):(I.userName=t,void M())});function M(){C(),$("#page1,#page3").hide(),$("#page2").show(),setTimeout(function(){m.canvasInit()},20),$(".redo").bind("click",function(){m.redo()}),$(".confirm").bind("click",function(){m.getPoint()?(r(),function(t){var e=Math.floor(100*Math.random())+1,n=$(".page3").eq(0);n.find(".name").html(I.userName),n.find(".tip").find("img").eq(0).hide(),n.find(".tip").find("img").eq(1).show();var o=e+1,i=0,r=30,a=0;o>=1&&o<10?(i=0,r=10+Math.floor(20*Math.random())):o>=10&&o<50?(i=1,r=30+Math.floor(150*Math.random())):o>=50&&o<70?(i=2,r=150+Math.floor(210*Math.random())):o>=70&&o<100&&(i=3,r=0);n.find(".tip var").html(I.titles[i]);var c=I.des[i].length;n.find(".des var").html(I.des[i][Math.floor(Math.random()*c)]),S&&clearInterval(S);r?(n.find(".time").removeClass("bold"),a=3600*(4+Math.floor(20*Math.random())),S=setInterval(function(){0==a&&clearInterval(S);var t=Math.floor(a/3600),e=Math.floor((a-60*t*60)/60),o=a-3600*t-60*e;--a,n.find(".time").removeClass("bold").html("<em>"+r+"</em>天 <var>"+t+"</var>:<var>"+e+"</var>:<var>"+o+"</var>")},1e3)):(n.find(".tip").find("img").eq(0).show(),n.find(".tip").find("img").eq(1).hide(),n.find(".time").addClass("bold").html("<em>10000年</em>"));t&&t()}(function(){setTimeout(function(){var t;C(),a(),$("body").on("contextmenu",function(){return!1}),$("#page1, #page2").hide(),$("#page3").show(),$(".retest").on("click",function(){M(),clearInterval(S)}),$("#page3").on("touchstart",function(e){t=setTimeout(function(){e.preventDefault(),function t(){r(),document.querySelector("#page4").innerHTML="",$("#page4").append($("#page3").clone()),setTimeout(function(){!function(t,e){var n=t,o=n.offsetWidth,i=n.offsetHeight,r=document.createElement("canvas");r.width=1.5*o,r.height=1.5*i,r.getContext("2d").scale(1.5,1.5);var a={scale:1.5,canvas:r,width:o,height:i,useCORS:!0,onrendered:function(t){console.log("=======onrendered");var n=t.getContext("2d");n.mozImageSmoothingEnabled=!1,n.webkitImageSmoothingEnabled=!1,n.msImageSmoothingEnabled=!1,n.imageSmoothingEnabled=!1,setTimeout(function(){var n=p.convertToJPEG(t,t.width,t.height);e&&e(n)},0)}};setTimeout(function(){html2canvas(n,a)})}($("#page4 #page3")[0],function(e){var n=new Image;$(".log").html(e.src.length),e.src.length<4e4?t():(n.onload=function(){k.find("#shareImg")[0].src=this.src,a(),k.find(".shareDist").css({display:"flex"}),k.find("#shareImg").css({width:"80%"}),k.find("#shareImg").on("touchstart",function(t){t.stopPropagation()}),k.find(".shareDist").on("touchstart",function(t){t.stopPropagation(),k.find(".shareDist").css({display:"none"}),k.find("#shareImg").off("touchstart"),k.find(".shareDist").off("touchstart"),$("#page4").empty()})},n.src=e.src)})},100)}()},300)}).on("touchmove",function(){clearTimeout(t)}).on("touchend",function(){clearTimeout(t)})},1e3)})):c("请连接至少一点")})}setTimeout(function(){g.lowSysVersion()&&g.isAnd()?($(".log").html("lowSysVersion"),y("https://cdn.bootcss.com/html2canvas/0.4.1/html2canvas.min.js")):y("https://cdn.bootcss.com/html2canvas/0.5.0-beta4/html2canvas.min.js")},0);var S=null;var k=$(".page3").eq(0);function C(){$(".redo, .confirm, #startBtn, .retest").off("click"),$("body").off("contextmenu")}},QzcR:function(t,e){},aO3C:function(t,e,n){t.exports=n.p+"static/media/music.9a8f660.mp3"},klGT:function(t,e){}},["NHnr"]);